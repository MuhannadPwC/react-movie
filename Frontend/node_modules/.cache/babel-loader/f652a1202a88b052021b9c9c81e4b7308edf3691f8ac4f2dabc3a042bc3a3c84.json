{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nfunction getFromList(key) {\n  const items = localStorage.getItem(key);\n  if (items) {\n    return JSON.parse(items);\n  }\n  return [];\n}\nfunction isStored(key, item) {\n  const temp = localStorage.getItem(key);\n  if (temp) {\n    const items = JSON.parse(temp);\n    return items.some(element => element.id === item.id);\n  }\n  return false;\n}\nfunction addToList(key, item) {\n  localStorage.setItem(key, JSON.stringify(item));\n}\nconst initialState = {\n  favourites: getFromList(\"heart\"),\n  watchLater: getFromList(\"save\")\n};\nexport const watchSlice = createSlice({\n  name: \"fav/watchlater\",\n  initialState,\n  reducers: {\n    addItems: (state, action) => {\n      const {\n        key,\n        movie\n      } = action.payload;\n      if (isStored(key, movie)) {\n        if (key === \"heart\") {\n          state.favourites = state.favourites.filter(item => item.id !== movie.id);\n          addToList(key, state.favourites);\n        } else {\n          state.watchLater = state.watchLater.filter(item => item.id !== movie.id);\n          addToList(key, state.watchLater);\n        }\n      } else {\n        if (key === \"heart\") {\n          state.favourites.push(movie);\n          addToList(key, state.favourites);\n        } else {\n          state.watchLater.push(movie);\n          addToList(key, state.watchLater);\n        }\n      }\n    }\n  }\n});\nexport default watchSlice.reducer;\nexport const {\n  addItems\n} = watchSlice.actions;\nexport const selectWatchLater = state => state.watchlistReducer.watchList;\nexport const selectFavourite = state => state.watchlistReducer.favourites;","map":{"version":3,"names":["createSlice","getFromList","key","items","localStorage","getItem","JSON","parse","isStored","item","temp","some","element","id","addToList","setItem","stringify","initialState","favourites","watchLater","watchSlice","name","reducers","addItems","state","action","movie","payload","filter","push","reducer","actions","selectWatchLater","watchlistReducer","watchList","selectFavourite"],"sources":["/Users/muhannadalomari/Desktop/2023 Interns Batch/react-project/react-movie-app/src/features/WatchSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nfunction getFromList(key) {\n  const items = localStorage.getItem(key);\n  if (items) {\n    return JSON.parse(items);\n  }\n  return [];\n}\n\nfunction isStored(key, item) {\n  const temp = localStorage.getItem(key);\n  if (temp) {\n    const items = JSON.parse(temp);\n    return items.some((element) => element.id === item.id);\n  }\n  return false;\n}\n\nfunction addToList(key, item) {\n  localStorage.setItem(key, JSON.stringify(item));\n}\n\nconst initialState = {\n  favourites: getFromList(\"heart\"),\n  watchLater: getFromList(\"save\"),\n};\n\nexport const watchSlice = createSlice({\n  name: \"fav/watchlater\",\n  initialState,\n  reducers: {\n    addItems: (state, action) => {\n      const {key, movie} = action.payload\n      if (isStored(key, movie)) {\n        if (key === \"heart\") {\n          state.favourites = state.favourites.filter(item => item.id !== movie.id)\n          addToList(key, state.favourites)\n        }\n        else {\n          state.watchLater = state.watchLater.filter(item => item.id !== movie.id)\n          addToList(key, state.watchLater)\n        }\n      } else {\n        if (key === \"heart\") {\n          state.favourites.push(movie)\n          addToList(key, state.favourites)\n        } else {\n          state.watchLater.push(movie)\n          addToList(key, state.watchLater)\n        }\n      }\n    }\n  },\n});\n\nexport default watchSlice.reducer\nexport const {addItems} = watchSlice.actions\nexport const selectWatchLater = (state) => state.watchlistReducer.watchList\nexport const selectFavourite = (state) => state.watchlistReducer.favourites"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,SAASC,WAAWA,CAACC,GAAG,EAAE;EACxB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACH,GAAG,CAAC;EACvC,IAAIC,KAAK,EAAE;IACT,OAAOG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC;EAC1B;EACA,OAAO,EAAE;AACX;AAEA,SAASK,QAAQA,CAACN,GAAG,EAAEO,IAAI,EAAE;EAC3B,MAAMC,IAAI,GAAGN,YAAY,CAACC,OAAO,CAACH,GAAG,CAAC;EACtC,IAAIQ,IAAI,EAAE;IACR,MAAMP,KAAK,GAAGG,IAAI,CAACC,KAAK,CAACG,IAAI,CAAC;IAC9B,OAAOP,KAAK,CAACQ,IAAI,CAAEC,OAAO,IAAKA,OAAO,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,CAAC;EACxD;EACA,OAAO,KAAK;AACd;AAEA,SAASC,SAASA,CAACZ,GAAG,EAAEO,IAAI,EAAE;EAC5BL,YAAY,CAACW,OAAO,CAACb,GAAG,EAAEI,IAAI,CAACU,SAAS,CAACP,IAAI,CAAC,CAAC;AACjD;AAEA,MAAMQ,YAAY,GAAG;EACnBC,UAAU,EAAEjB,WAAW,CAAC,OAAO,CAAC;EAChCkB,UAAU,EAAElB,WAAW,CAAC,MAAM;AAChC,CAAC;AAED,OAAO,MAAMmB,UAAU,GAAGpB,WAAW,CAAC;EACpCqB,IAAI,EAAE,gBAAgB;EACtBJ,YAAY;EACZK,QAAQ,EAAE;IACRC,QAAQ,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC3B,MAAM;QAACvB,GAAG;QAAEwB;MAAK,CAAC,GAAGD,MAAM,CAACE,OAAO;MACnC,IAAInB,QAAQ,CAACN,GAAG,EAAEwB,KAAK,CAAC,EAAE;QACxB,IAAIxB,GAAG,KAAK,OAAO,EAAE;UACnBsB,KAAK,CAACN,UAAU,GAAGM,KAAK,CAACN,UAAU,CAACU,MAAM,CAACnB,IAAI,IAAIA,IAAI,CAACI,EAAE,KAAKa,KAAK,CAACb,EAAE,CAAC;UACxEC,SAAS,CAACZ,GAAG,EAAEsB,KAAK,CAACN,UAAU,CAAC;QAClC,CAAC,MACI;UACHM,KAAK,CAACL,UAAU,GAAGK,KAAK,CAACL,UAAU,CAACS,MAAM,CAACnB,IAAI,IAAIA,IAAI,CAACI,EAAE,KAAKa,KAAK,CAACb,EAAE,CAAC;UACxEC,SAAS,CAACZ,GAAG,EAAEsB,KAAK,CAACL,UAAU,CAAC;QAClC;MACF,CAAC,MAAM;QACL,IAAIjB,GAAG,KAAK,OAAO,EAAE;UACnBsB,KAAK,CAACN,UAAU,CAACW,IAAI,CAACH,KAAK,CAAC;UAC5BZ,SAAS,CAACZ,GAAG,EAAEsB,KAAK,CAACN,UAAU,CAAC;QAClC,CAAC,MAAM;UACLM,KAAK,CAACL,UAAU,CAACU,IAAI,CAACH,KAAK,CAAC;UAC5BZ,SAAS,CAACZ,GAAG,EAAEsB,KAAK,CAACL,UAAU,CAAC;QAClC;MACF;IACF;EACF;AACF,CAAC,CAAC;AAEF,eAAeC,UAAU,CAACU,OAAO;AACjC,OAAO,MAAM;EAACP;AAAQ,CAAC,GAAGH,UAAU,CAACW,OAAO;AAC5C,OAAO,MAAMC,gBAAgB,GAAIR,KAAK,IAAKA,KAAK,CAACS,gBAAgB,CAACC,SAAS;AAC3E,OAAO,MAAMC,eAAe,GAAIX,KAAK,IAAKA,KAAK,CAACS,gBAAgB,CAACf,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}